$containerHeight: 50px;

$loadingTransitionDelayInitial: 300ms;
$loadingTransitionDelay: 100ms;
$loadingTransitionDuration: 150ms;

body.light,
body[data-theme="light"] {
    .container {
        --background-color: hsl(0, 0%, 100%);
        --tooltip-box-shadow-color: hsla(0, 0%, 100%);
        --box-shadow-color: rgba(0, 0, 0, 0.3);
        --indicator-background-color: rgb(65, 65, 65);
        --indicator-box-shadow-color: rgba(0, 0, 0, 0.4);
        --item-background-color-hover: rgb(218, 218, 218);
        --item-background-color-active: rgb(194, 194, 194);
        --item-background-color-activated: rgb(235, 235, 235);
    }
}

body.dark,
body[data-theme="dark"] {
    .container {
        --background-color: hsl(0, 0%, 13%);
        --tooltip-box-shadow-color: hsla(0, 0%, 6%);
        --box-shadow-color: rgb(255, 255, 255, 0.1);
        --indicator-background-color: white;
        --indicator-box-shadow-color: rgb(194, 224, 255);
        --item-background-color-hover: rgb(54, 54, 54);
        --item-background-color-active: rgb(78, 78, 78);
        --item-background-color-activated: rgb(70, 70, 70);
    }
}

.container {
    --item-width: 5rem;
    --container-height: 5rem;

    @media (max-width: 780px) {
        --item-width: 4.5rem;
        --container-height: 4.5rem;
    }

    position: sticky;
    inset-inline: 0;
    inset-block-start: 0;

    display: flex;
    flex-direction: row;
    flex-shrink: 0;

    width: 100%;
    height: var(--container-height);

    background-color: var(--background-color);

    box-shadow: 0 0 1.2rem 0 var(--box-shadow-color);

    * {
        transition: all 150ms ease-out;
    }

    &[data-navigation-tooltip="true"] {
        box-shadow: 0 0 12rem 6rem var(--tooltip-box-shadow-color);
    }

    transition-property: all, box-shadow;
    transition-duration: 150ms, 100ms;
    transition-timing-function: ease-out, linear;

    z-index: 99999;

    .expander {
        flex-grow: 1;

        height: 100%;

        order: 3;
    }

    .indicator {
        position: absolute;
        inset-block-start: 100%;

        height: 3px;

        background-color: var(--indicator-background-color);

        box-shadow: 0 0 1rem 0.1rem var(--indicator-box-shadow-color);

        transition: all 0.2s cubic-bezier(0.25, 1, 0.5, 1);

        z-index: 6;
    }

    .image {
        position: relative;

        height: 3.5rem;
        width: 3.5rem;

        @media (max-width: 780px) {
            width: 3rem;
            height: 3rem;
        }

        border-radius: 50%;

        overflow: hidden;
    }

    .logo {
        order: 1;

        display: flex;

        place-items: center;
        place-content: center;

        padding: 0.75rem;

        min-width: var(--item-width);

        user-select: none;

        .text {
            margin-inline-start: 0.5rem;

            font-family: var(--font-secondary);
            font-weight: 900;

            text-transform: capitalize;

            @media (max-width: 780px) {
                display: none;
            }
        }

        &[data-activated="true"] {
            background-color: var(--item-background-color-activated);
        }

        @media (hover: hover) {
            &:hover {
                background-color: var(--item-background-color-hover);
            }
        }

        &:active {
            background-color: var(--item-background-color-active);
        }
    }

    .route {
        order: 2;
    }

    .link {
        display: inline-flex;

        place-items: center;
        place-content: center;

        height: 100%;
        width: var(--item-width);

        i {
            font-size: 2rem;

            pointer-events: none;
            user-select: none;
        }

        @media (hover: hover) {
            &:hover {
                background-color: var(--item-background-color-hover);
            }
        }

        &:active {
            background-color: var(--item-background-color-active);
        }

        &[data-activated="true"] {
            background-color: transparent;

            color: var(--global-color);

            i,
            i:after,
            i:before {
                text-shadow: 0 0 1rem rgb(194, 224, 255);
            }
        }
    }

    .tooltip {
        position: absolute;
        inset-block-start: 100%;

        padding: 0.25em 0.5em;

        transition: all 150ms cubic-bezier(0.165, 0.84, 0.44, 1);

        user-select: none;

        pointer-events: none;

        .title {
            font-family: var(--font-secondary);
            font-weight: 900;
            font-size: 1.8rem;
        }

        .description {
            font-family: var(--font-secondary);
            font-size: 1.4rem;
        }
    }

    .hamburger {
        --container-height: 0.3rem;
        --border-radius: 2.5em;

        order: 6;

        width: var(--item-width);
        height: 100%;

        padding: 0.7rem;

        display: flex;
        flex-direction: column;

        place-items: left;
        place-content: center space-around;

        overflow: hidden;

        div {
            height: var(--container-height);

            border-radius: var(--border-radius);

            background-color: var(--global-color);

            &:nth-child(1) {
                width: 100%;
            }

            &:nth-child(2) {
                width: 75%;
            }

            &:nth-child(3) {
                width: 50%;
            }
        }

        &[data-activated="true"] {
            background-color: var(--item-background-color-activated);

            place-content: center;

            div {
                background-color: deeppink;

                &:nth-child(1) {
                    width: 100%;

                    transform-origin: center center;

                    translate: 0 calc(var(--container-height));
                    rotate: 45deg;
                }

                &:nth-child(2) {
                    width: 100%;

                    translate: 100% 0;

                    opacity: 0;
                }

                &:nth-child(3) {
                    width: 100%;

                    transform-origin: center;

                    translate: 0 calc(var(--container-height) * -1);
                    rotate: -45deg;
                }
            }

            @media (hover: hover) {
                &:hover {
                    background-color: var(--item-background-color-hover);

                    div {
                        &:nth-child(1) {
                            width: 100%;

                            scale: 75%;
                        }

                        &:nth-child(3) {
                            width: 100%;

                            scale: 75%;
                        }
                    }
                }
            }

            &:active {
                background-color: var(--item-background-color-active);
            }
        }

        @media (hover: hover) {
            &:hover {
                background-color: var(--item-background-color-hover);

                div {
                    &:nth-child(3) {
                        width: 100%;
                    }

                    &:nth-child(1) {
                        width: 50%;
                    }
                }
            }
        }

        &:active {
            background-color: var(--item-background-color-active);
        }
    }

    .button,
    .subwindow {
        position: relative;

        order: 4;

        min-width: var(--item-width);

        border-radius: 0;

        i {
            font-size: 1.3em;
            font-weight: bold;
        }

        .text {
            display: inline-block;
        }

        @media (max-width: 780px) {
            place-content: center;
            place-items: center;

            padding: 0;

            i {
                margin: 0;
            }

            .text {
                display: none;
            }
        }

        &:active {
            scale: 1;

            filter: brightness(1.25);
        }
    }

    .button {
        &[data-activated="false"] {
            filter: brightness(70%);

            @media (hover: hover) {
                &:hover {
                    filter: brightness(80%);
                }
            }

            &:active {
                filter: brightness(90%);
            }
        }
    }

    .subwindow {
        order: 5;

        position: relative;

        z-index: -2;

        .content {
            position: absolute;
            inset-block-start: 100%;

            background-color: var(--global-background-color-deep);

            color: var(--global-color);

            height: 0;
            max-height: calc(100vh - $containerHeight);
            max-width: 100vw;
            width: max-content;

            border-bottom-width: 0;
            border-bottom-style: solid;

            overflow: hidden;

            box-sizing: border-box;

            pointer-events: all;

            .inside {
                padding: 1rem;

                pointer-events: all;
                user-select: all;

                font-size: 1em;
                font-family: var(--font-primary);
                font-weight: normal;
            }

            z-index: 3;

            &[data-align="right"] {
                inset-inline-end: 0;
            }

            &[data-align="left"] {
                inset-inline-start: 0;
            }

            &[data-align="full"] {
                margin: 0;
            }
        }

        &[data-activated="true"] {
            z-index: 1;

            .content {
                height: max-content;

                border-bottom-width: 3px;
            }
        }
    }

    .underlay {
        position: absolute;
        inset-block-start: 0;
        inset-inline: 0;

        height: 100vh;
        width: 100%;

        pointer-events: none;

        z-index: -1;
    }

    &[data-underlay="true"] {
        .underlay {
            pointer-events: all;
        }
    }

    &[data-hide="true"] {
        height: 0;

        box-shadow: 0 0 0 0 transparent;

        *:not(.indicator) {
            opacity: 0;
        }
    }
}

.loading {
    display: flex;

    position: absolute;
    inset: 0;

    width: 100%;
    height: 100%;

    z-index: 100;

    overflow: hidden;

    pointer-events: none;
    user-select: none;

    --transition-delay-initial: $loadingTransitionDelayInitial;
    --transition-delay: $loadingTransitionDelay;
    --transition-duration: $loadingTransitionDuration;

    --animation-duration: 1s;

    span {
        position: absolute;
        inset-block: 0;

        height: 100%;
        width: 25%;

        z-index: 9;

        translate: 0 -100%;

        transition-property: translate;
        transition-duration: $loadingTransitionDuration;
        transition-timing-function: cubic-bezier(0.47, 0, 0.745, 0.715);

        animation-name: popping;
        animation-duration: var(--animation-duration);
        animation-iteration-count: infinite;
        animation-play-state: paused;

        &:nth-child(1) {
            left: 0;

            background-color: #70d6ff;

            transition-delay: $loadingTransitionDelayInitial + $loadingTransitionDelay * 0;

            animation-delay: calc(var(--transition-delay) * 0);
        }

        &:nth-child(2) {
            left: 25%;

            background-color: #ff70a6;

            transition-delay: $loadingTransitionDelayInitial + $loadingTransitionDelay * 1;

            animation-delay: calc(var(--transition-delay) * 1);
        }

        &:nth-child(3) {
            left: 50%;

            background-color: #ff9770;

            transition-delay: $loadingTransitionDelayInitial + $loadingTransitionDelay * 2;

            animation-delay: calc(var(--transition-delay) * 2);
        }

        &:nth-child(4) {
            left: 75%;

            background-color: #ffd670;

            transition-delay: $loadingTransitionDelayInitial + $loadingTransitionDelay * 3;

            animation-delay: calc(var(--transition-delay) * 3);
        }
    }

    &[data-loading="true"] {
        pointer-events: all;
        user-select: all;

        span {
            animation-play-state: running;

            translate: 0 0;
        }
    }
}

@keyframes popping {
    75% {
        scale: 1.3 1;
    }
}

:export {
    containerHeight: $containerHeight;

    loadingTransitionDelayInitial: $loadingTransitionDelayInitial;
    loadingTransitionDelay: $loadingTransitionDelay;
    loadingTransitionDuration: $loadingTransitionDuration;
}
